# =============================================================================
# Phase 1 Testing Parameters
# =============================================================================
#
# Configuration for Phase 1 hardware testing and validation.
#
# Phase 1 Goals:
# - Verify all hardware connections
# - Test motor control and encoder feedback
# - Validate sensor data streams
# - Confirm teleoperation functionality
# - Basic odometry verification
#
# =============================================================================

# =============================================================================
# System Configuration
# =============================================================================
system:
  ros__parameters:
    # Robot name
    robot_name: "terrain_mapping_rover"
    
    # Phase
    phase: 1
    
    # Debug mode (enables verbose logging)
    debug_mode: true
    
    # Log level
    log_level: "debug"

# =============================================================================
# VEX Serial Node Configuration
# =============================================================================
vex_serial_node:
  ros__parameters: 
    # Serial port (adjust based on your setup)
    serial_port: "/dev/ttyACM0"
    baud_rate: 115200
    
    # Timeouts
    heartbeat_interval_ms: 100
    command_timeout_ms: 500
    
    # Publish rates
    encoder_publish_rate_hz: 50. 0
    status_publish_rate_hz: 2.0
    
    # Robot parameters (must match VEX side)
    wheel_radius_m: 0.0508
    track_width_m: 0.295
    ticks_per_revolution: 1800
    
    # Velocity limits for Phase 1 testing (conservative)
    max_linear_velocity_ms: 0.2
    max_angular_velocity_rads:  0.3

# =============================================================================
# IMU Node Configuration
# =============================================================================
imu_node:
  ros__parameters:
    i2c_bus: 1
    i2c_address:  0x68
    publish_rate_hz: 100.0
    frame_id: "imu_link"
    
    # Sensor ranges
    accel_range_g: 2
    gyro_range_dps: 250
    
    # Auto-calibrate on startup
    auto_calibrate:  true
    calibration_samples: 500
    
    # Filtering
    use_complementary_filter: true
    complementary_alpha: 0.98

# =============================================================================
# Camera Node Configuration
# =============================================================================
camera_node:
  ros__parameters:
    camera_index: 0
    frame_id: "camera_optical_frame"
    
    # Resolution (lower for Phase 1 testing)
    width: 640
    height: 480
    frame_rate: 15.0
    
    # Encoding
    encoding: "bgr8"
    enable_compressed:  true
    jpeg_quality: 70

# =============================================================================
# ToF Camera Configuration
# =============================================================================
tof_camera_node:
  ros__parameters: 
    device_id: 0
    frame_id: "tof_optical_frame"
    
    # Depth mode for indoor testing
    depth_mode: "near"
    frame_rate: 15.0
    
    # Filtering
    confidence_threshold: 30
    enable_temporal_filter: true
    enable_spatial_filter: true
    
    # Point cloud
    publish_pointcloud: true

# =============================================================================
# Teleop Configuration
# =============================================================================
teleop_keyboard: 
  ros__parameters:
    # Conservative limits for Phase 1
    max_linear_velocity:  0.2
    max_angular_velocity: 0.3
    
    linear_velocity_step: 0.02
    angular_velocity_step:  0.05
    
    publish_rate: 10.0
    idle_timeout:  0.5
    enable_estop: true

teleop_gamepad:
  ros__parameters:
    max_linear_velocity: 0.2
    max_angular_velocity: 0.3
    turbo_multiplier: 1.5
    
    linear_axis: 1
    angular_axis: 0
    enable_button:  5
    turbo_button: 4
    estop_button: 1
    
    deadzone: 0.1
    publish_rate: 20.0

# =============================================================================
# Test Configuration
# =============================================================================
phase1_test:
  ros__parameters:
    # Test durations (seconds)
    motor_test_duration: 5.0
    sensor_test_duration: 10.0
    integration_test_duration: 30.0
    
    # Test velocities
    test_linear_velocity: 0.1
    test_angular_velocity: 0.2
    
    # Pass criteria
    min_encoder_rate_hz: 40.0
    min_imu_rate_hz: 90.0
    min_camera_rate_hz: 10.0
    min_tof_rate_hz:  10.0
    
    # Odometry tolerance
    odometry_position_tolerance_m: 0.05
    odometry_angle_tolerance_rad: 0.1