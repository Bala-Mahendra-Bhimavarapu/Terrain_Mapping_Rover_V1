# =============================================================================
# Phase 3 Testing Parameters - EKF Odometry Fusion
# =============================================================================
#
# Configuration for Phase 3 EKF testing and validation.
#
# Phase 3 Goals:
# - Verify EKF is fusing wheel odometry and IMU
# - Validate filtered odometry output
# - Test sensor fusion quality
# - Confirm TF publishing
#
# =============================================================================

# =============================================================================
# EKF Test Parameters
# =============================================================================
ekf_test:
  ros__parameters:
    # Test durations (seconds)
    sensor_check_duration: 5.0
    fusion_test_duration: 10.0
    odom_test_duration: 15.0
    integration_test_duration: 30.0
    
    # Expected topic rates (Hz)
    expected_rates:
      odom_raw: 50.0
      imu:  100.0
      odom_filtered: 50.0
    
    # Minimum acceptable rates (Hz)
    min_rates:
      odom_raw:  30.0
      imu: 50.0
      odom_filtered: 30.0
    
    # Fusion quality thresholds
    max_position_error: 0.5        # meters (raw vs filtered)
    max_orientation_error: 0.3    # radians
    max_velocity_error: 0.5       # m/s
    
    # Covariance thresholds
    max_position_covariance: 1.0  # meters^2
    max_orientation_covariance: 0.5  # radians^2

# =============================================================================
# Test Motion Commands
# =============================================================================
test_motion: 
  ros__parameters:
    # Velocity for test motions
    linear_velocity: 0.1    # m/s
    angular_velocity: 0.2   # rad/s
    
    # Duration for each test motion (seconds)
    forward_duration: 2.0
    rotation_duration: 3.0
    
    # Settle time after motion (seconds)
    settle_time: 1.0

# =============================================================================
# Sensor Topics
# =============================================================================
sensor_topics:
  wheel_odometry:  "/vex/odom_raw"
  imu: "/imu/data"
  filtered_odometry: "/odometry/filtered"
  cmd_vel: "/cmd_vel"

# =============================================================================
# Diagnostic Thresholds
# =============================================================================
diagnostics:
  ros__parameters:
    # Rate monitoring
    rate_warning_threshold: 0.8   # 80% of expected
    rate_error_threshold: 0.5     # 50% of expected
    
    # Data freshness (seconds)
    data_timeout: 1.0
    
    # Covariance monitoring
    covariance_warning_threshold: 0.5
    covariance_error_threshold: 2.0
